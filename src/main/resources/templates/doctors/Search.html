<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title th:text="#{doctors.search.title}">Ï†ÑÎ¨∏Ïùò Í≤ÄÏÉâ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
          min-height: 100vh;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          margin-top: 80px;
        }
        .search-container {
          background: white;
          border-radius: 24px;
          box-shadow: 0 8px 32px rgba(0,0,0,0.08);
          padding: 2.5rem 2rem;
          max-width: 950px;
          margin: 2rem auto;
        }
        .search-header {
          text-align: center;
          margin-bottom: 2.5rem;
        }
        .search-header h3 {
          color: #007bff;
          font-weight: 700;
          font-size: 2rem;
          margin-bottom: 0.5rem;
        }
        .search-form {
          background: #f8faff;
          border-radius: 16px;
          box-shadow: 0 2px 8px rgba(0,123,255,0.04);
          padding: 1.5rem 1rem 1rem 1rem;
          margin-bottom: 2.5rem;
        }
        .search-form .form-control, .search-form .form-select {
          border-radius: 12px;
          border: 1px solid #e3eafc;
          font-size: 1rem;
        }
        .search-form .btn-primary {
          background: linear-gradient(135deg, #007bff, #0056b3);
          border: none;
          border-radius: 15px;
          font-weight: 600;
          padding: 0.7rem 2.2rem;
          box-shadow: 0 3px 10px rgba(0,123,255,0.13);
          transition: all 0.2s;
        }
        .search-form .btn-primary:hover {
          background: linear-gradient(135deg, #0056b3, #007bff);
          color: #fff;
          transform: translateY(-2px);
        }
        .doctor-card {
          background: #fff;
          border-radius: 18px;
          box-shadow: 0 4px 16px rgba(0,0,0,0.07);
          border: 1px solid #e9ecef;
          overflow: hidden;
          transition: all 0.2s;
          height: 100%;
        }
        .doctor-card:hover {
          box-shadow: 0 8px 32px rgba(0,123,255,0.13);
          border-color: #007bff;
          transform: translateY(-3px);
        }
        .doctor-img {
          width: 100%;
          height: 150px;
          object-fit: cover;
          border-radius: 12px;
          border: 2px solid #e3eafc;
          background: #f8f9fa;
          box-shadow: 0 2px 8px rgba(0,123,255,0.06);
        }
        .doctor-card .card-title {
          color: #2c3e50;
          font-weight: 600;
          font-size: 1.15rem;
          margin-bottom: 0.5rem;
        }
        .doctor-card .card-text strong {
          color: #007bff;
          font-weight: 500;
        }
        .doctor-card .btn-outline-primary {
          border-color: #007bff;
          color: #007bff;
          border-radius: 15px;
          font-size: 0.95rem;
          padding: 0.4rem 1.1rem;
          transition: all 0.2s;
        }
        .doctor-card .btn-outline-primary:hover {
          background: #007bff;
          color: #fff;
          border-color: #007bff;
          transform: translateY(-1px);
        }
        .alert-warning {
          border-radius: 12px;
          font-size: 1.05rem;
          text-align: center;
        }
        @media (max-width: 768px) {
          .search-container {
            padding: 1.2rem 0.5rem;
          }
          .search-header h3 {
            font-size: 1.3rem;
          }
          .doctor-img {
            height: 100px;
          }
        }
    </style>
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<div class="search-container">
    <div class="search-header">
        <h3 class="fw-bold"><i class="fas fa-search me-2"></i><span th:text="#{doctors.search.header}">Ï†ÑÎ¨∏Ïùò Í≤ÄÏÉâ</span>
        </h3>
    </div>

    <!-- üîç Í≤ÄÏÉâ Ìèº -->
    <form th:action="@{/doctors/Search}" method="get" class="row g-3 mb-4 search-form">
        <div class="col-md-4">
            <input type="text" name="name" class="form-control" th:placeholder="#{doctors.search.name.placeholder}"
                   th:value="${param.name}">
        </div>
        <div class="col-md-4">
            <select name="department" class="form-select">
                <option value="" th:text="#{doctors.search.department.all}">ÏßÑÎ£åÍ≥º Ï†ÑÏ≤¥</option>

                <!-- ‚úÖ ÌïúÍ∏Ä/ÏòÅÎ¨∏ Ï†ÑÌôò -->
                <option th:each="dept : ${departmentList}"
                        th:value="${#locale.language == 'en' ? dept.nameEn : dept.name}"
                        th:text="${#locale.language == 'en' ? dept.nameEn : dept.name}"
                        th:selected="${param.department == (#locale.language == 'en' ? dept.nameEn : dept.name)}">
                </option>
            </select>

        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary"><i class="fas fa-search me-2"></i><span
                    th:text="#{doctors.search.button}">Í≤ÄÏÉâ</span></button>
        </div>
    </form>

    <!-- üë®‚Äç‚öïÔ∏è Í≤ÄÏÉâ Í≤∞Í≥º Î™©Î°ù -->
    <div th:if="${doctors != null}">
        <div th:if="${doctors.isEmpty()}" class="alert alert-warning" th:text="#{doctors.search.noresult}">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä
            ÏóÜÏäµÎãàÎã§.
        </div>
        <div class="row row-cols-1 row-cols-md-2 g-3">
            <div class="col" th:each="doctor : ${doctors}">
                <div class="card doctor-card h-100 p-2">
                    <div class="row g-0 align-items-center">
                        <div class="col-4 text-center">
                            <img th:src="@{${doctor.profileImage}}" alt="ÌîÑÎ°úÌïÑ" class="img-fluid doctor-img">
                        </div>
                        <div class="col-8">
                            <div class="card-body">
                                <h5 class="card-title" th:text="${doctor.name}">Ïù¥Î¶Ñ</h5>
                                <p class="card-text mb-1">
                                    <strong th:text="#{doctors.search.department}">ÏßÑÎ£åÍ≥º:</strong>
                                    <span th:text="${#locale.language == 'en' ? doctor.department.nameEn : doctor.department.name}">ÎÇ¥Í≥º</span>
                                </p>

                                <a th:href="@{/doctors/{id}(id=${doctor.id})}" class="btn btn-outline-primary mt-2"><i
                                        class="fas fa-user-md me-1"></i><span
                                        th:text="#{doctors.search.profile}">ÌîÑÎ°úÌïÑ Î≥¥Í∏∞</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
